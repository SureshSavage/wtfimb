{% extends "layout.html" %}

{% block style %}
#searchbar {
display: none;
}
{% endblock %}

{% block script %}
var stages=Array();
var data;
$(document).ready(function(){
	$.getJSON("{% url api.views.autocomplete_stages %}", function(json){
		data = json;
		jQuery.each(json, function(k,v) { stages.push(k); });
		$("#from").autocomplete(stages, {matchContains:true});
		$("#to").autocomplete(stages, {matchContains:true});
	});

	$("#submit").click(function(){
		if ($("#to").val() == "") {
		 var fromId = data[$("#from").val()];
		 top.location = "/chennai/stage/" + fromId;
		 return;
		 }
		var fromId = data[$("#from").val()];
		var toId = data[$("#to").val()];		
		top.location = "/chennai/path/" + fromId + "/" + toId;
	});
});
{% endblock %}

{% block title %}
Home 
{% endblock %}

{% block main %}

<form id="homeform" action="#">
	<table>
		<tbody>
			<tr>
				<td>From</td>
				<td><input type="text" id="from" /> </td>
				<td>To</td>
				<td><input type="text" id="to" /> </td>
				<td><input type="button" id="submit" value="Find Route!"/></td>
			</tr>
		</tbody>
	</table>
</form>
<div class="links"> 
	<h3>Important Locations</h3> 
	<a class="box stop" href="/chennai/stage/1921">Broadway</a> 
	<a class="box stop" href="/chennai/stage/1941">High Court</a> 
	<a class="box stop" href="/chennai/stage/2083">CMBT</a> 
	<a class="box stop" href="/chennai/stage/1885">Central</a> 
	<a class="box stop" href="/chennai/stage/2036">Egmore</a> 
	<a class="box stop" href="/chennai/stage/1871">Airport</a> 
</div> 
<div class="links"> 
	<h3>Special Routes</h3> 
	<a class="box bus" href="/chennai/routes/type/AC/">AC Volvo Routes</a> 
	<a class="box bus" href="/chennai/routes/type/D/">Deluxe Routes</a> 
	<a class="box bus" href="/chennai/routes/type/X/">Express Routes</a> 
	<a class="box bus" href="/chennai/routes/type/LSS/">LSS Routes</a> 
	<a class="box bus" href="/chennai/routes/type/M/">M Routes</a> 
	<a class="box bus" href="/chennai/routes/type/O/">Ordinary Routes</a> 
	<a class="box bus" href="/chennai/routes/type/N/">24hr Night Routes </a> 
	</div> 
<div class="links">
	<h3>Contribute</h3>
	<a class="box page" href="/chennai/mapped/stages">Mapped Stages</a>
	<a class="box page" href="/chennai/unmapped/stages">Unmapped Stages</a>
	<a class="box page" href="/chennai/unmapped/routes">Unmapped Routes</a>
	<a class="box page" href="/chennai/janitor/inconsistent/routes/4">Erroneous Routes</a>
</div>
{% endblock %}
