{% extends "layout.html" %}

{% block style %}
#searchbar {
display: none;
}
{% endblock %}

{% block script %}
var stages=Array();
var data;
$(document).ready(function(){
	$.getJSON("{% url api.views.autocomplete_stages %}", function(json){
		data = json;
		jQuery.each(json, function(k,v) { stages.push(k); });
		$("#from").autocomplete(stages, {matchContains:true});
		$("#to").autocomplete(stages, {matchContains:true});
	});

	$("#submit").click(function(){
		if ($("#to").val() == "") {
		 var fromId = data[$("#from").val()];
		 top.location = "/chennai/stage/" + fromId;
		 return;
		 }
		var fromId = data[$("#from").val()];
		var toId = data[$("#to").val()];		
		top.location = "/chennai/path/" + fromId + "/" + toId;
	});
});
{% endblock %}

{% block title %}
Home 
{% endblock %}

{% block main %}

<form id="homeform" action="#">
	<table>
		<tbody>
			<tr>
				<td>From</td>
				<td><input type="text" id="from" /> </td>
				<td>To</td>
				<td><input type="text" id="to" /> </td>
				<td><input type="button" id="submit" value="Find Route!"/></td>
			</tr>
		</tbody>
	</table>
</form>
<div class="links">
	<h3>Important Locations</h3>
	<a class="box stop" href="/chennai/view/stage/1921">Broadway</a>
	<a class="box stop" href="/chennai/view/stage/1941">High Court</a>
	<a class="box stop" href="/chennai/view/stage/2083">CMBT</a>
	<a class="box stop" href="/chennai/view/stage/1885">Central</a>
	<a class="box stop" href="/chennai/view/stage/1871">Airport</a>
</div>
<div class="links">
	<h3>Contribute</h3>
	<a class="box page" href="/chennai/view/mapped/stages">Mapped Stages</a>
	<a class="box page" href="/chennai/view/unmapped/stages">Unmapped Stages</a>
	<a class="box page" href="/chennai/view/unmapped/routes">Unmapped Routes</a>
	<a class="box page" href="/chennai/janitor/inconsistent/routes/4">Erroneous Routes</a>
</div>
<div class="links">
	<h3>External Information</h3>
	<a class="box link" href="http://en.wikipedia.org/wiki/Chennai">Chennai in Wikipedia</a>
	<a class="box link" href="http://www.openstreetmap.org/?lat=13.07915&amp;lon=80.2762&amp;zoom=15&amp;layers=B000FTF">Chennai in Openstreetmap</a>
	<a class="box link" href="http://commons.wikimedia.org/wiki/File:Chennai_suburban_rail_and_bus_interconnectivity_map.png">Chennai Railway Map</a> 
</div>
{% endblock %}
